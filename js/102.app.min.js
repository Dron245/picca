"use strict";(self.webpackChunkfls_start=self.webpackChunkfls_start||[]).push([[102],{7716:(t,e,n)=>{n.r(e),n.d(e,{default:()=>b});var i=n(4848),r=n(6540),s=n(7767),a=n(4976),c=n(1083),l=n(1468),o=n(9196),u=n(9087),p=n(4636),f=function(){return f=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},f.apply(this,arguments)},d=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function a(t){try{l(i.next(t))}catch(t){s(t)}}function c(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}l((i=i.apply(t,e||[])).next())}))},h=function(t,e){var n,i,r,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=c(0),a.throw=c(1),a.return=c(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(s=0)),s;)try{if(n=1,i&&(r=2&c[0]?i.return:c[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,c[1])).done)return r;switch(i=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,i=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){s=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){s.label=c[1];break}if(6===c[0]&&s.label<r[1]){s.label=r[1],r=c;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(c);break}r[2]&&s.ops.pop(),s.trys.pop();continue}c=e.call(t,s)}catch(t){c=[6,t],i=0}finally{n=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}};const b=function(){var t=(0,s.Zp)(),e=(0,l.wA)(),n=(0,s.g)().idPizza,b=(0,r.useState)({id:"",title:"",imageUrl:"",price:[],types:[],sizes:[],count:0,countPizzaBlock:0,cartId:0}),z=b[0],y=b[1],m=(0,l.d4)(p.aJ).items,x=(0,r.useState)(0),v=x[0],j=x[1],k=1===z.types.length&&1===z.types[0]?(0,r.useState)(1):(0,r.useState)(0),_=k[0],g=k[1],w=(0,l.d4)((0,p.r5)(n)),N=m.find((function(t){return t.title===z.title&&t.types===u.D[_]&&t.sizes===z.sizes[v]})),S=N?N.count:0,C=w?w.countPizzaBlock:0;try{(0,r.useEffect)((function(){d(void 0,void 0,void 0,(function(){var t;return h(this,(function(e){switch(e.label){case 0:return[4,c.A.get("https://66853f80b3f57b06dd4bf714.mockapi.io/pizzas/"+"".concat(n))];case 1:return t=e.sent().data,y(t),[2]}}))}))}),[])}catch(e){alert("ошибка в получении пицц"),console.log(e),t("/")}return(0,i.jsx)("div",{className:"container fullpizza",children:z?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("img",{className:"fullpizza__img",src:z.imageUrl}),(0,i.jsxs)("div",{className:"fullpizza__content",children:[(0,i.jsx)("p",{className:"pizza-block__title",children:z.title}),(0,i.jsxs)("p",{className:"pizza-block__price",children:[z.price[v]," рублей"]}),(0,i.jsxs)("div",{className:"pizza-block__selector",children:[(0,i.jsx)("ul",{children:z.types.map((function(t){return(0,i.jsx)("li",{onClick:function(){return g(t)},className:_===t?"active":"",children:u.D[t]},t)}))}),(0,i.jsx)("ul",{children:z.sizes.map((function(t,e){return(0,i.jsxs)("li",{onClick:function(){return j(e)},className:v===e?"active":"",children:[t," см."]},e)}))})]}),(0,i.jsx)("button",{style:{marginRight:"20px"},onClick:function(){var t=f(f({},z),{price:z.price[v],types:u.D[_],sizes:z.sizes[v]});e((0,o.B5)(t))},className:"button button--outline button--add",children:(0,i.jsx)("span",{children:"купить"})}),(0,i.jsx)(a.N_,{to:"/",className:"button button--outline button--add go-back-btn",children:(0,i.jsx)("span",{children:"Вернуться назад"})}),(0,i.jsxs)("div",{className:"pizza-block__info",children:[(0,i.jsxs)("span",{className:"pizza-block__title",children:["Всего куплено пицц ",z.title,": ",C]}),(0,i.jsxs)("span",{className:"pizza-block__price",children:['Куплено пицц "',z.title,'" тесто: ',u.D[_],' размер "',z.sizes[v],' см" : ',S," шт."]})]})]})]}):"Загрузка..."})}}}]);